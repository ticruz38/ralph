# Ralph Retrospective Analysis

You are performing a final retrospective analysis of a completed Ralph agent loop. Your job is to review all the logs and progress history to surface important findings for the human.

## Your Task

Read and analyze:
1. **All log files** in `logs/` directory - these contain detailed output from every agent iteration
2. **progress.txt** - contains accumulated learnings and patterns from each iteration
3. **prd.json** - the completed PRD with all stories marked `passes: true`

## What to Look For

### 1. Impossible/Deferred Items
- Features or requirements that could not be implemented as specified
- Stories that required scope reduction or modification
- Technical blockers that forced workarounds
- Dependencies that were unavailable or incompatible

### 2. Challenging Implementations
- Stories that took multiple attempts or iterations
- Complex refactors or architectural changes
- Difficult debugging sessions (evident from error patterns in logs)
- Integration challenges with existing code

### 3. Difficult Compromises
- Design decisions where trade-offs were made
- Performance vs. maintainability choices
- Scope reductions to meet constraints
- Workarounds for technical limitations

### 4. Important Design Decisions
- Architectural patterns established during implementation
- API design choices made by the agent
- New conventions or patterns introduced
- Significant refactors that changed the codebase structure

### 5. Critical Patterns & Gotchas
- Recurring issues that multiple iterations encountered
- Non-obvious dependencies discovered
- Testing or quality check requirements that caused friction
- Environment or configuration surprises

## Output Format

Write your findings to `RETROSPECTIVE.md` in the project root:

```markdown
# Ralph Retrospective

> Analysis of the completed agent loop - surfaced for human review

---

## Summary

- **Iterations:** N
- **Stories Completed:** N
- **Overall Assessment:** (smooth / moderate challenges / significant difficulties)

---

## Impossible or Deferred Items

### [Item Name]
- **Story:** US-XXX
- **What was attempted:** Brief description
- **Why it couldn't be done:** Technical or constraint reason
- **What was done instead:** The compromise or workaround
- **Log reference:** `logs/XXX-XXXXXX.log` (if relevant)

---

## Challenging Implementations

### [Challenge Name]
- **Story:** US-XXX
- **What made it difficult:** Technical explanation
- **Evidence:** Error patterns, multiple attempts, long debugging sessions
- **Resolution:** How it was eventually solved
- **Log reference:** `logs/XXX-XXXXXX.log` (lines X-Y if identifiable)

---

## Key Design Decisions

### [Decision Name]
- **Context:** What necessitated this decision
- **Decision:** What was chosen
- **Rationale:** Why this approach was taken
- **Impact:** How it affects the codebase going forward
- **Alternative considered:** What else was evaluated (if evident from logs)

---

## Critical Patterns & Gotchas

### [Pattern Name]
- **Issue:** What kept causing problems
- **Root cause:** Why it happened
- **Solution:** How it was resolved
- **Future prevention:** What future agents should know

---

## Recommendations

1. **For this codebase:** Specific suggestions based on challenges encountered
2. **For future Ralph runs:** How to avoid similar difficulties
3. **Technical debt:** Areas that may need attention later

---

*Generated by Ralph retrospective analysis*
```

## Guidelines

- Be specific - reference actual log files and story IDs
- Be objective - describe what happened, not judgmental
- Be actionable - provide insights that help future development
- Be concise - focus on the most important findings
- If a section has no significant findings, write "No major items identified" rather than omitting it

## Stop Condition

After writing `RETROSPECTIVE.md`, reply with:
```
<promise>RETROSPECTIVE COMPLETE</promise>
```
